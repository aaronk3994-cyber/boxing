<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Elite Boxer: Supply Drop Edition</title>
    <style>
        body { background: #121212; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        canvas { background: #2c3e50; border: 6px solid #34495e; box-shadow: 0 0 30px rgba(0,0,0,0.7); border-radius: 8px; }
        .menu-overlay { position: absolute; background: rgba(0,0,0,0.9); width: 800px; height: 400px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 8px; text-align: center; }
        button { padding: 10px 15px; cursor: pointer; background: #e74c3c; color: white; border: none; font-weight: bold; margin: 5px; transition: 0.2s; }
        button:hover { background: #c0392b; transform: scale(1.05); }
        .active-opt { border: 3px solid #f1c40f; }
    </style>
</head>
<body>

    <div id="game-wrapper" style="position: relative;">
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        
        <div id="menu" class="menu-overlay">
            <h1>ELITE BOXER</h1>
            <div>
                <p>Difficulty:</p>
                <button id="d1" onclick="setDiff(0.03, 'd1')">EASY</button>
                <button id="d2" class="active-opt" onclick="setDiff(0.07, 'd2')">NORMAL</button>
                <button id="d3" onclick="setDiff(0.12, 'd3')">HARD</button>
            </div>
            <div>
                <p>Supply Drops (Weapons fall from sky):</p>
                <button id="dropOff" class="active-opt" onclick="setDrops(false, 'dropOff')">OFF</button>
                <button id="dropOn" onclick="setDrops(true, 'dropOn')">ON</button>
            </div>
            <br>
            <button style="background:#2ecc71; font-size: 20px;" onclick="startGame()">START FIGHT</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const menu = document.getElementById("menu");

        let gameState = "MENU";
        let aiAggro = 0.07;
        let dropsEnabled = false;
        let winner = null;
        let items = [];

        const weapons = {
            'Gloves': { dmg: 8, range: 80, stamina: 10, color: 'white' },
            'Bat': { dmg: 18, range: 130, stamina: 25, color: '#8d6e63' },
            'Brass': { dmg: 25, range: 65, stamina: 20, color: '#f1c40f' }
        };

        function setDiff(v, id) { aiAggro = v; clearGroup('d'); document.getElementById(id).classList.add('active-opt'); }
        function setDrops(v, id) { dropsEnabled = v; clearGroup('drop'); document.getElementById(id).classList.add('active-opt'); }
        function clearGroup(prefix) { document.querySelectorAll(`button[id^="${prefix}"]`).forEach(b => b.classList.remove('active-opt')); }

        class Item {
            constructor() {
                this.x = Math.random() * 700 + 50;
                this.y = -50;
                this.type = Math.random() > 0.5 ? 'Bat' : 'Brass';
            }
            update() { if (this.y < 320) this.y += 3; }
            draw() {
                ctx.fillStyle = "#d38d5f";
                ctx.fillRect(this.x, this.y, 30, 30);
                ctx.strokeStyle = "white"; ctx.strokeRect(this.x, this.y, 30, 30);
            }
        }

        class Fighter {
            constructor(x, color, side, isAI) {
                this.x = x; this.y = 240; this.w = 60; this.h = 110;
                this.color = color; this.side = side; this.isAI = isAI;
                this.hp = 100; this.stamina = 100;
                this.velY = 0; this.velX = 0;
                this.isJumping = false; this.isBlocking = false;
                this.action = "idle"; this.actionTimer = 0;
                this.weapon = weapons['Gloves'];
            }
            update() {
                this.y += this.velY; this.x += this.velX; this.velX *= 0.85;
                if (this.y < 240) { this.velY += 1.2; this.isJumping = true; } 
                else { this.y = 240; this.velY = 0; this.isJumping = false; }
                if (this.stamina < 100) this.stamina += 0.5;
                if (this.actionTimer > 0) this.actionTimer--; else this.action = "idle";

                // Item Pickup
                items.forEach((it, index) => {
                    if (this.x < it.x + 30 && this.x + this.w > it.x && this.y < it.y + 30 && this.y + this.h > it.y) {
                        this.weapon = weapons[it.type];
                        items.splice(index, 1);
                    }
                });
            }
            draw() {
                ctx.fillStyle = this.isBlocking ? "#7f8c8d" : this.color;
                ctx.fillRect(this.x, this.y, this.w, this.h);
                // Draw Weapon in hand
                ctx.fillStyle = this.weapon.color;
                let wx = this.side === "left" ? this.x + 45 : this.x + 5;
                ctx.fillRect(wx, this.y + 50, 10, 20);

                let barX = this.side === "left" ? 20 : 580;
                ctx.fillStyle = "red"; ctx.fillRect(barX, 20, this.hp * 2, 15);
                ctx.fillStyle = "lime"; ctx.fillRect(barX, 40, this.stamina * 2, 5);

                if (this.action === "atk") {
                    ctx.fillStyle = "rgba(255,255,255,0.5)";
                    let hitX = this.side === "left" ? this.x + 60 : this.x - this.weapon.range + 60;
                    ctx.fillRect(hitX, this.y + 30, this.weapon.range - 60, 20);
                }
            }
        }

        let p1, cpu, keys = {};
        window.onkeydown = (e) => keys[e.code] = true;
        window.onkeyup = (e) => keys[e.code] = false;

        function startGame() {
            p1 = new Fighter(100, "#e74c3c", "left", false);
            cpu = new Fighter(640, "#3498db", "right", true);
            gameState = "PLAY";
            menu.style.display = "none";
            if(dropsEnabled) setInterval(() => { if(!winner) items.push(new Item()); }, 7000);
        }

        function checkHit(atk, def) {
            let dist = Math.abs(atk.x - def.x);
            if (dist < atk.weapon.range) {
                def.hp -= def.isBlocking ? atk.weapon.dmg * 0.2 : atk.weapon.dmg;
                def.velX = atk.side === "left" ? 15 : -15;
                if (def.hp <= 0) winner = atk.isAI ? "CPU" : "PLAYER 1";
            }
        }

        function gameLoop() {
            ctx.clearRect(0, 0, 800, 400);
            if (gameState === "PLAY") {
                if (winner) {
                    ctx.fillStyle = "gold"; ctx.font = "40px Arial";
                    ctx.fillText(winner + " WINS!", 280, 200);
                } else {
                    // P1
                    if (keys['KeyA'] && p1.x > 0) p1.x -= 5;
                    if (keys['KeyD'] && p1.x < cpu.x - 60) p1.x += 5;
                    if (keys['KeyW'] && !p1.isJumping) p1.velY = -18;
                    p1.isBlocking = keys['KeyB'];
                    if (keys['Space'] && p1.actionTimer <= 0 && p1.stamina > p1.weapon.stamina) {
                        p1.action = "atk"; p1.actionTimer = 20; p1.stamina -= p1.weapon.stamina; checkHit(p1, cpu);
                    }
                    // AI
                    let d = Math.abs(cpu.x - p1.x);
                    if (d > cpu.weapon.range) cpu.x -= 3;
                    if (Math.random() < aiAggro && cpu.actionTimer <= 0) {
                        cpu.action = "atk"; cpu.actionTimer = 20; checkHit(cpu, p1);
                    }
                    items.forEach(it => { it.update(); it.draw(); });
                    p1.update(); cpu.update(); p1.draw(); cpu.draw();
                }
            }
            requestAnimationFrame(gameLoop);
        }
        gameLoop();
    </script>
</body>
</html>
What's New:
